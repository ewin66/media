*** VideoServer (VS) CHANGELOG ***

Version 10.14.0.7
	09/11/2008
	* Ooops---fix DefaultProfileName for EVDO-SurveyorT from "High" to "Low"
	(darnold)

10.14.0.6 - 09/10/2008

- (darnold) changed DefaultProfileName for EVDO profiles from "High" to "Low"

10.14.0.5 - 09/09/2008 (darnold)

- Fixes bug where MS was listing itself in SVD's treeview
	Call NetControl.Get_Remote_Advertised_Services() instead of
		NetControl.Get_Advertised_Services()

- Add Lock to QueryOriginServers.FindSource()

- Remove "restream" source from Sources.xml.  This will disable
	the restreamer feature since it needs more testing.

10.14.0.4 - 09/09/2008 (darnold)

- Removed referece on MediaClientInstallerHelper.dll (in Libraries\Internal)
	from InstallerHelper
	
- Replaced InstallerHelper with two new custom action projects:
	- LicensingInstallerHelper
	- RegistrationInstallerHelper

- Removed MCastProtocol.DLL from list of DLLs to register

10.14.0.3 - 09/08/2008 (darnold)

- Remove Description from "restream" source -- this will avoid restream sources from
	from being displayed in SVD unless the source is generated by MediaServer
	
10.14.0.2 - 09/08/2008 (darnold)

- Fixes mantis bug# 263 - logical group "latv" always using first tuner card, even
	when MaxClients is set correctly.  

- Don't publish OriginServers in GetServerInfo() if "restream" source is not configured.

- Attempt to resolve incoming header addresses as names if IPAddress.Parse fails

10.14.0.1 - 09/02/2008 (darnold)

- Cleaned up ICameraControl; moved properties into ICameraControlProperties

- Added support for an improved restreamer support:
	- ServerInfo now contains a list of "origin" servers that the MS
		knows about (using NetControl.Get_Advertised_Services)
	- Minimal configuration requirements; there is no need to configure a source
		on the restreamer MS for each source on an origin to be restreamed.  
		The only requirement is for a single source configuration on the
		restreamer called "restream".  If the SourceName of an OpenGraphRequest
		contains a ":", it is assumed that it contains the name of the origin server.
		
- Removed implementation of "OpenGraph" and "OpenPhysicalGraph" from GraphManager and made GraphManager a static class.
	
- Removed ReadTimeoutInMilliseconds from CameraControlInfo

- Implemented ProfileGroups property in GetServerInfo() so the Server configurator can get/put profile groups.
	- Added LoadFromFile() to ProfileGroups
	
- Changed when Profile and Client updates are sent to clients.  Previously they were sent during client KeepAlive(),
	now a timer is set in StreamingGraph and the updates are sent when the timer elapses.



10.13.0.2 - 08/29/2008 (darnold)

- Fixed mantis #236 (User names get changed to String.Empty) during ServerGraphRebuildException

- Fixed "key not found in dictionary" when a second user connects to an existing stream that has
	a custom profile active

- Handle "Custom" profiles where Profile.Video==null in Mango.cs and FastVDO.cs

10.13.0.1 - 08/29/2008 (darnold, kdixon)

- Fix mantis#201 -- "Safe Handle has been closed"

- Moved source configuration out of app.config (MediaServer.exe.config) and into app_data\sources.xml
	Fixes Mantis #101

- Moved contents of CameraControls.xml into Sources.xml (camera control config now embedded into source config)

- Fixes to Visca zoom translation - MaxZoom=40 for Visca

- Fixes Mantis #213 (Restore PTZ Fav doesn't work--camera doesn't move)

- Fixes Mantis #201, #210 (Safe handle has been closed crash in MS) and (Network Error [code 1] crash in SVD)

- fixed/verified/closed mantis#93 -- opening graph at 30FPS on mango causes crash



10.12.0.1 - 08/20/2008

- universal degrees system for camera control

- Pelco D protocol support

- SVD's favorites are now stored per source on the server



10.11.0.1 (7/9/2008)

- Changed name from "VideoServer" to "MediaServer".

- Namespace changes and SVN check-in work.

- Increased camera control relinquish timer from 30 seconds to 2 minutes.

- Added new profiles: EVDO-TCP (same as EVDO except uses TCP protocol instead of UDP), LAN and HDLAN.

- Added support to handle changes to profile group as well as profile from SVD.

- Added support from "custom" profiles (ability to tweak framerate and bitrate).

- Added support to stop, and completely rebuild a server graph.  This was needed to handle
	the changing of framerate for Mango graphs.  The new exception ServerGraphRebuildException
	was added for this.  The MediaServer sends this exception back to SVD when the server
	graph has been rebuilt so SVD knows to reconnect at the low-level.

- Removed hard-coded value of the MangoX_DM_D.out from the MangoCapture filter.

- Moved the SinkURL configuration parameter out of app.config and into the profile.
	Profiles can select different protocols.

- Added support for Motion-JPEG 2000, but license still needed from LEADTOOLS

- Added support for changing profiles that have different framerates.

- Allow SVD to "override" profile settings with specific parameters, such as the ability to set bitrate

- Don't start DebugView by default in debug mode--only start debugview when started as "videoserver debug viewer"

- Fixed Mantis 5 (configuring too high a resolution causes VideoServer to crash) - increased buffer size

- Fixed Mantis 78 (support custom profiles)

- Fixed Mantis 191 (send custom profile notifications to SVD)



10.10.0.2 (07/03/2008)

- Fixed a bug where network TV would not report the current channel to clients, it would always be "0"

10.10.0.1 (7/2/2008)

- Catch errors during uninstall (try to prevent VS from uninstalling)

- Support for server-side recordings: added new graph types: MangoWithRecording and BouncingBallDVR

- Added new configuration item MaxRecordingChunkMinutes

- Removed TV viewing support from ZViewer

- Removed Preloaded sources from VS (this has never worked right)

- Lots of changes to graph support: Refactored graphs, moved common code to graphmanager
	and added new interfaces/contracts
	
- New WCF services: StreamService, TVStreamService and RecordService
	
- Removed VSConsole and ZRecorder (they have never been used)



10.9.0.4 (6/25/2008)

- More DVRWriter work--no functional changes

10.9.0.3 (6/19/2008)

- Add DVRWriter to solution and register at install time (for server-side recordings)

10.9.0.2 (5/15/2008)

- NetSource change: Leave graphclient running

10.9.0.1 (5/15/2008)

- Changes to SendUsersUpdate() in StreamingVideo -- not backward compatible

- Add AppLogger.Message() to FastVDO.SetParameters()



10.8.0.7 (5/13/2008)

- Send userlist and profile changes on every keepalive

10.8.0.6 (5/13/2008)

- Use LEADTOOLS H.264 Encoder (4.0) for BouncingBall

- Add AppLogger.Message(EntryPoint) to all SourceControlService methods

10.8.0.5 (5/13/2008)

- put sleep in BouncingBall [improves testing]

10.8.0.4 (5/8/2008)

- Make user list and notifications more useful; show changes to User list

- Catch exceptions in VideoServerSetupCustomActions

10.8.0.3 (5/8/2008)

- Fixes to GraphService

10.8.0.2 (5/7/2008)

- SendProfileUpdate and ClientsUpdate on the first keepalive request received from client

10.8.0.1 (5/7/2008)

- Changes to IGraphControl interface (OpenGraphRequest added to OpenGraph)

- Send client list to SVD when connected clients changes

- Increased DGRAM Receive timeout from 5 seconds to 8 seconds



10.7.0.6 (5/1/2008)

- Set DGRAM_MAX_PACKET_SIZE to 900.  EVDO testing (ping -f -l 997 www.google.com) shows problems with packet sizes > 996.

- More checking added to handle case where no video signal present on microware receiver camera input: Handle more timeout cases in MangoCapture DirectShowFilter.  

10.7.0.5 (4/27/2008)

- Fix SVD hang when no camera connected to input

10.7.0.4 (4/25/2008)

- Remove DebugLog in SendChunk

10.7.0.3 (4/25/2008)

- Fix bug in new jitter buffer that caused failures over EVDO networks.  Sent packet sizes were 8192 bytes too big!

10.7.0.2 (4/24/2008)

- Fix crash in SCClose() (Entry point not found) in TestFastVDO

10.7.0.1 (4/21/2008)

- added jitter buffer - new protocol for DGramProtocol

- Call SmartCaptureSDK.SCClose() and SCClose2() in FVDO.Dispose()--needed because signature of SCClose() in newer firmware



10.6.0.8 (4/18/2008)

- Call SmartCaptureSDK.SCReset() if an error occurs try to create graph and connect pins.  Only works for firmware version .71 and higher

10.6.0.7 ( 4/8/2008)

- catch some unhandled exceptions

- Fixes to FastVDO.cs: keep device context open while graph exists, move things around in SetParamaters() and ResetParameters()

- ResetParameters() and SendProfileUpdate() now called from BaseGraph.AddClient()

- change interval for GraphControl.Client.KeepAliveTimer to 10 seconds (from 5 seconds)

10.6.0.6 (4/8/2008)

- call SmartCaptureSDK.SCStop() before graph is connected

10.6.0.5 (4/2/2008)

- set CameraControl.Response.IsAvailable = true, even if COM port is not currently available.  This affects visibility of the "Control PTZ" button in SVD.

10.6.0.4 (3/31/2008)

- Launch DebugView when VideoServer is started in debug mode

- Added new ExceptionDumper class to common--replaced all uses of DumpException with new class

- Includes new FastVDO SmartCapture.ax DirectShow filter that fixes the following crash:
	Unhandled Exception: System.NullReferenceException: Object reference not set to an instance of an object.
		at CSplitterFilter.ReadOneQBox(CSplitterFilter* )
		at CSplitterFilter.Resume(CSplitterFilter* )
		at CSplitterFilter.ThreadProc(CSplitterFilter* )
		
10.6.0.3 (3/28/2008)

- changed all VSLog.WriteLine() and fprintf() to AppLogger.Message() and OutputDebugString()

- reset stream profile back to default when user reconnects or when second user connects		

10.6.0.2 (3/28/2008)

- Changed DGRAM_MAX_PACKET size to 7000 (from 1458)

- Include DbgView in VS installer

10.6.0.1 (3/26/2008)

- remove embedded sequence number from dgram packets (was only used to debug # 2283)


10.5.0.3 (3/20/2008)

- embed packet count

10.5.0.2 (3/19/2008)

- DGramProtocol log file for out-of-order packets

- Fixed a potential sign/unsigned mismatch in DGramProtocol SendChunk (nLeft was DWORD)

- Corrected config files to $InterfaceAddress (was $ipaddr)

- if VideoMaxBitRate != -1, set LMNetMux.BitRateLimit

10.5.0.1 (3/14/2008)

- Changes to profile name are now sent in the video stream.  This way, all users watching a video stream will see changes to profile name including users
	watching a stream through a restreamer.  Also, changes to profilename are captured in recordings.  In a future version, this exact technique can be
	used for other telemetry data, such as GPS, Compress, temperature, heart rate, etc.



10.4.0.2 (3/13/2008)

- Fixed date/time display on VS Console log

- Fixed bug where we got "H264 pin not found" with new profile handling

10.4.0.1 (3/11/2008)

- Changed profile handling (interface/contract change) -- compatibility changes



10.3.0.32 (2/29/2008)

- Changed default bitrate for backpack/surveyor to 64kbps instead of 128kbps.

10.3.0.31 (2/26/2008)

- Added AddDomain.UnhandledException handler; hopefully this will catch any unhandled exceptions in any thread to help with troubleshooting.

10.3.0.30 (2/22/2008)

- Includes new SmartCapture.ax DirectShow filter from FastVDO; This new filter will give consistent NALU
	regardless of the firmware version of the SmartCapture device.
- Changes to H264ByteStream to be compatible with new SmartCapture DirectShow filter

10.3.0.29 (2/19/2008)

- Save SPS in case SmartCapture devices only sends one.

10.3.0.28 (2/15/2008)

- Add graphedt.exe to installer
- Add SmartCaptureVerCheck.exe to installer
- Fixed TestFastVDO
- Add debug file support to H.264 Byte Stream Transform
- Includes latest SmartCaptureVerCheck.exe that supposedly WON'T HANG
- Includes a new H264ByteStreamPre55 filter to provide backwards compatibility with buggy (Pre version 0.55) FastVDO SmartCapture devices
- H264ByteStream now includes timestamp debug logging

10.3.0.27 (2/13/2008)

- bugfix: put *.config into output directory.

10.3.0.26 (2/13/2008)

- Changed LiveSource="false" to "true" for Vid1

- Added back 64kbps for H264fvdo (FastVDO Profile)

10.3.0.25 (2/12/2008)

- Added new profile specifically for FastVDO--FastVDO has problems operating at frames rates before 15 fps and bitrates below 128kbps.

- Use latest SmartCapture.ax filter from FastVDO

- Many improvements to H.264 Byte Stream transform filter -- there were some bugs, but I'm not sure if these bugs were the cause of some of the glitches we have seen.

10.3.0.24

- FastVDO - include private drop of SmartCapture.ax instead of using version in SmartPlayer.
NOTE: THERE IS NO NEED TO INSTALL FastVDO SmartPlayer on surveyor's and backpacks.

- New "canned" configuration files for surveyor (surveyor.config), explorer (explorer.config), Mobile Command Vehicle (mcv.config).

- Use new LEADTOOLS DSKernel2.DLL -- supposedly fixes our "nag" messages.

- Remove LEADTOOLS license unlock from VideoServer and ZViewer and moved to VideoServer installer. 

- Start of groundwork for server-side recordings and H.264 over MPEG2 streaming using new LEADTOOLS filters.

- fixed a bug in H.264 Byte Stream Transform filter -- don't know if this bug was causing any of our symptoms.